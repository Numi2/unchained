# unchained Configuration File

[net]
# Port to listen on for P2P connections
listen_port = 31000
# Path to the Iroh secret key
iroh_key_path = "iroh.key"
# Maximum number of peer connections (prevents resource exhaustion)
max_peers = 10000
# Connection timeout in seconds
connection_timeout_secs = 30
# The public IP address of this node, to be announced to other peers.
# This is essential for nodes running behind a NAT.
public_ip = "34.51.215.84"

# Bootstrap nodes to connect to - add your seed nodes here for public deployment
# Format: /ip4/IP_ADDRESS/udp/PORT/quic-v1/p2p/PEER_ID
bootstrap = []

[p2p]
# Peer scoring and rate limiting constants
max_validation_failures_per_peer = 10
peer_ban_duration_secs = 3600 # 1 hour
rate_limit_window_secs = 60
max_messages_per_window = 100

[storage]
# Path where blockchain data will be stored (outside src-tauri to avoid rebuild loops)
# Move runtime data one directory up so that it no longer lives inside
# `src-tauri` – this prevents the Tauri development file-watcher from
# rebuilding the app every time the node writes to its database.
path = "../blockchain_data"

[epoch]
# Duration of each epoch in seconds 
seconds = 22
# Target number of leading zeros for proof-of-work difficulty (start with 1 for public mining)
target_leading_zeros = 1
# Retargeting parameters
# Target number of coins per epoch for difficulty adjustment (reduced for public mining)
target_coins_per_epoch = 3
# How often to retarget (every N epochs - more frequent for dynamic adjustment)
retarget_interval = 2000
# Maximum difficulty adjustment factor 
max_difficulty_adjustment = 1.05

[mining]
# Enable mining by default
enabled = true
# Memory usage for Argon2 hashing in KiB (32 MiB, optimized for mining speed)
mem_kib = 16192
# Number of parallel lanes for Argon2 (2 lanes for better parallelization)
lanes = 2

# Memory retargeting parameters
# Minimum memory in KiB
min_mem_kib = 16192

# Maximum memor in KiB 
max_mem_kib = 512007

# Memory adjustment factor 
max_memory_adjustment = 1.02

# Miner stability settings for multi-node environments
# Heartbeat interval in seconds (more frequent for network stability)
heartbeat_interval_secs = 140
# Maximum consecutive failures before restarting miner (more forgiving for network issues)
max_consecutive_failures = 3
# Maximum mining attempts per epoch before moving to next epoch (higher for public mining)
max_mining_attempts = 50000

[metrics]
# Optional – leave out to use the default "0.0.0.0:9100"
bind = "0.0.0.0:9100"
